{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst ADD_TRANSACTION = 'ADD_TRANSACTION';\nconst RECEIVE_TX_RECEIPT = 'RECEIVE_TX_RECEIPT';\nconst SET_TRANSACTIONS = 'SET_TRANSACTIONS';\nexport const addTransaction = transaction => ({\n  type: ADD_TRANSACTION,\n  transaction\n});\nexport const receiveTxReceipt = (txHash, receipt) => ({\n  type: RECEIVE_TX_RECEIPT,\n  txHash,\n  receipt\n});\nexport const setTransactions = transactions => ({\n  type: SET_TRANSACTIONS,\n  transactions\n});\nexport const initialState = {\n  initialized: false,\n  transactions: {}\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case ADD_TRANSACTION:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        transactions: _objectSpread(_objectSpread({}, state.transactions), {}, {\n          [action.transaction.hash]: action.transaction\n        })\n      });\n\n    case RECEIVE_TX_RECEIPT:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        transactions: _objectSpread(_objectSpread({}, state.transactions), {}, {\n          [action.txHash]: _objectSpread(_objectSpread({}, state.transactions[action.txHash]), {}, {\n            receipt: action.receipt\n          })\n        })\n      });\n\n    case SET_TRANSACTIONS:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        transactions: action.transactions,\n        initialized: true\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","map":{"version":3,"sources":["/Users/theo/genesis/contexts/Transactions/reducer.ts"],"names":["ADD_TRANSACTION","RECEIVE_TX_RECEIPT","SET_TRANSACTIONS","addTransaction","transaction","type","receiveTxReceipt","txHash","receipt","setTransactions","transactions","initialState","initialized","reducer","state","action","hash"],"mappings":";;;;;;AAGA,MAAMA,eAAe,GAAG,iBAAxB;AACA,MAAMC,kBAAkB,GAAG,oBAA3B;AACA,MAAMC,gBAAgB,GAAG,kBAAzB;AAyBA,OAAO,MAAMC,cAAc,GAAIC,WAAD,KAAqD;AACjFC,EAAAA,IAAI,EAAEL,eAD2E;AAEjFI,EAAAA;AAFiF,CAArD,CAAvB;AAKP,OAAO,MAAME,gBAAgB,GAAG,CAACC,MAAD,EAAiBC,OAAjB,MAA0E;AACxGH,EAAAA,IAAI,EAAEJ,kBADkG;AAExGM,EAAAA,MAFwG;AAGxGC,EAAAA;AAHwG,CAA1E,CAAzB;AAMP,OAAO,MAAMC,eAAe,GAAIC,YAAD,KAA2D;AACxFL,EAAAA,IAAI,EAAEH,gBADkF;AAExFQ,EAAAA;AAFwF,CAA3D,CAAxB;AAKP,OAAO,MAAMC,YAA+B,GAAG;AAC7CC,EAAAA,WAAW,EAAE,KADgC;AAE7CF,EAAAA,YAAY,EAAE;AAF+B,CAAxC;;AAKP,MAAMG,OAAO,GAAG,CAACC,KAAD,EAA2BC,MAA3B,KAA8E;AAC5F,UAAQA,MAAM,CAACV,IAAf;AACE,SAAKL,eAAL;AACE,6CACKc,KADL;AAEEJ,QAAAA,YAAY,kCACPI,KAAK,CAACJ,YADC;AAEV,WAACK,MAAM,CAACX,WAAP,CAAmBY,IAApB,GAA2BD,MAAM,CAACX;AAFxB;AAFd;;AAOF,SAAKH,kBAAL;AACE,6CACKa,KADL;AAEEJ,QAAAA,YAAY,kCACPI,KAAK,CAACJ,YADC;AAEV,WAACK,MAAM,CAACR,MAAR,mCACKO,KAAK,CAACJ,YAAN,CAAmBK,MAAM,CAACR,MAA1B,CADL;AAEEC,YAAAA,OAAO,EAAEO,MAAM,CAACP;AAFlB;AAFU;AAFd;;AAUF,SAAKN,gBAAL;AACE,6CACKY,KADL;AAEEJ,QAAAA,YAAY,EAAEK,MAAM,CAACL,YAFvB;AAGEE,QAAAA,WAAW,EAAE;AAHf;;AAKF;AACE,aAAOE,KAAP;AA3BJ;AA6BD,CA9BD;;AAgCA,eAAeD,OAAf","sourcesContent":["import { TransactionReceipt } from 'web3-core'\nimport { Transaction, TransactionsMap } from './types'\n\nconst ADD_TRANSACTION = 'ADD_TRANSACTION'\nconst RECEIVE_TX_RECEIPT = 'RECEIVE_TX_RECEIPT'\nconst SET_TRANSACTIONS = 'SET_TRANSACTIONS'\n\ninterface AddTransactionAction {\n  type: typeof ADD_TRANSACTION,\n  transaction: Transaction\n}\n\ninterface ReceiveTxReceiptAction {\n  type: typeof RECEIVE_TX_RECEIPT,\n  txHash: string,\n  receipt: TransactionReceipt\n}\n\ninterface SetTransactionsAction {\n  type: typeof SET_TRANSACTIONS,\n  transactions: TransactionsMap\n}\n\ntype TransactionsActions = AddTransactionAction | ReceiveTxReceiptAction | SetTransactionsAction\n\nexport interface TransactionsState {\n  initialized: boolean,\n  transactions: TransactionsMap\n}\n\nexport const addTransaction = (transaction: Transaction): AddTransactionAction => ({\n  type: ADD_TRANSACTION,\n  transaction,\n})\n\nexport const receiveTxReceipt = (txHash: string, receipt: TransactionReceipt): ReceiveTxReceiptAction => ({\n  type: RECEIVE_TX_RECEIPT,\n  txHash,\n  receipt,\n})\n\nexport const setTransactions = (transactions: TransactionsMap): SetTransactionsAction => ({\n  type: SET_TRANSACTIONS,\n  transactions,\n})\n\nexport const initialState: TransactionsState = {\n  initialized: false,\n  transactions: {}\n}\n\nconst reducer = (state: TransactionsState, action: TransactionsActions): TransactionsState => {\n  switch (action.type) {\n    case ADD_TRANSACTION:\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [action.transaction.hash]: action.transaction,\n        }\n      }\n    case RECEIVE_TX_RECEIPT:\n      return {\n        ...state,\n        transactions: {\n          ...state.transactions,\n          [action.txHash]: {\n            ...state.transactions[action.txHash],\n            receipt: action.receipt,\n          }\n        }\n      }\n    case SET_TRANSACTIONS:\n      return {\n        ...state,\n        transactions: action.transactions,\n        initialized: true,\n      }\n    default:\n      return state\n  }\n}\n\nexport default reducer"]},"metadata":{},"sourceType":"module"}