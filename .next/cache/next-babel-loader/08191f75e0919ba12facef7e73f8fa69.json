{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _taggedTemplateLiteral from \"@babel/runtime/helpers/esm/taggedTemplateLiteral\";\n\nvar _jsxFileName = \"/Users/theo/frontend/pages/savingsDetail.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    {\\n      pairDayDatas(\\n        first: 100\\n        orderBy: date\\n        orderDirection: asc\\n        where: {\\n          pairAddress: \\\"\", \"\\\"\\n          date_gt: 1592505859\\n        }\\n      ) {\\n        date\\n        reserveUSD\\n      }\\n    }\\n  \"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport Web3 from \"web3\";\nimport { provider } from \"web3-core\";\nimport { CircularProgressbarWithChildren, buildStyles } from \"react-circular-progressbar\";\nimport numbro from \"numbro\";\nimport gql from \"graphql-tag\";\nimport moment from \"moment\";\nimport { useWallet } from \"use-wallet\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport useFarm from \"../hooks/useFarm\";\nimport useRedeem from \"../hooks/useRedeem\";\nimport useSushi from \"../hooks/useSushi\";\nimport useEarnings from \"../hooks/useEarnings\";\nimport useStake from \"../hooks/useStake\";\nimport useUnstake from \"../hooks/useUnstake\";\nimport useStakedBalance from \"../hooks/useStakedBalance\";\nimport useTokenBalance from \"../hooks/useTokenBalance\";\nimport useReward from \"../hooks/useReward\";\nimport useApprove from \"../hooks/useApprove\";\nimport useAllowance from \"../hooks/useAllowance\";\nimport useWindowSize from \"../hooks/useWindowSize\";\nimport withApollo from \"../utils/withApollo\";\nimport { getMasterChefContract } from \"../sushi/utils\";\nimport { getContract } from \"../utils/erc20\";\nimport { getBalanceNumber } from \"../utils/formatBalance\";\nimport Layout from \"../components/layout\";\nimport LayoutDashboard from \"../components/layoutDashboard\";\nimport CustomChart from \"../components/customChart\";\nimport StakingInput from \"../components/stakingInput\";\nimport ColorGuide from \"../styles/colorGuide\";\nimport styles from \"./index.module.css\";\n\nfunction SavingsDetail() {\n  _s();\n\n  var _this = this;\n\n  var _useWindowSize = useWindowSize(),\n      responsiveWidth = _useWindowSize.responsiveWidth,\n      responsiveHeight = _useWindowSize.responsiveHeight;\n\n  var _useWallet = useWallet(),\n      account = _useWallet.account;\n\n  var _useState = useState(1),\n      currentTimeFrame = _useState[0],\n      setCurrentTimeFrame = _useState[1];\n\n  var _useState2 = useState(\"0\"),\n      stakingBalance = _useState2[0],\n      setStakingBalance = _useState2[1];\n\n  var _useState3 = useState(null),\n      selectedAmount = _useState3[0],\n      setSelectedAmount = _useState3[1];\n\n  var _useState4 = useState(false),\n      requestedApproval = _useState4[0],\n      setRequestedApproval = _useState4[1];\n\n  var _useState5 = useState(true),\n      loading = _useState5[0],\n      setLoading = _useState5[1];\n\n  var isMobileLayout = responsiveWidth < 650;\n\n  var _useRouter = useRouter(),\n      farmId = _useRouter.query.farmId;\n\n  var _ref = useFarm(farmId) || {\n    pid: 0,\n    lpToken: \"\",\n    lpTokenAddress: \"\",\n    tokenAddress: \"\",\n    earnToken: \"\",\n    name: \"\",\n    icon: \"\"\n  },\n      pid = _ref.pid,\n      lpToken = _ref.lpToken,\n      lpTokenAddress = _ref.lpTokenAddress,\n      tokenAddress = _ref.tokenAddress,\n      earnToken = _ref.earnToken,\n      name = _ref.name,\n      icon = _ref.icon;\n\n  var QUERY = gql(_templateObject(), lpTokenAddress);\n\n  var _useQuery = useQuery(QUERY),\n      isLoadingQuery = _useQuery.loading,\n      aggregateData = _useQuery.data;\n\n  useEffect(function () {\n    window.scrollTo(0, 0);\n  }, []);\n  var sushi = useSushi();\n  var earnings = useEarnings(pid);\n\n  var _useWallet2 = useWallet(),\n      ethereum = _useWallet2.ethereum;\n\n  var lpContract = useMemo(function () {\n    return getContract(ethereum, lpTokenAddress);\n  }, [ethereum, lpTokenAddress]);\n\n  var _useStake = useStake(pid),\n      onStake = _useStake.onStake;\n\n  var _useUnstake = useUnstake(pid),\n      onUnstake = _useUnstake.onUnstake;\n\n  var _useReward = useReward(pid),\n      onReward = _useReward.onReward;\n\n  var _useApprove = useApprove(lpContract),\n      onApprove = _useApprove.onApprove;\n\n  var allowance = useAllowance(lpContract);\n  var tokenBalance = useTokenBalance(lpContract.options.address);\n  var stakedBalance = useStakedBalance(pid);\n\n  var _useRedeem = useRedeem(getMasterChefContract(sushi)),\n      onRedeem = _useRedeem.onRedeem;\n\n  var handleApprove = useCallback( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var txHash;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setRequestedApproval(true);\n            _context.next = 4;\n            return onApprove();\n\n          case 4:\n            txHash = _context.sent;\n\n            if (!txHash) {\n              setRequestedApproval(false);\n            }\n\n            _context.next = 11;\n            break;\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            console.log(_context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  })), [onApprove, setRequestedApproval]);\n  var lpTokenName = useMemo(function () {\n    return lpToken;\n  }, [lpToken]);\n  var earnTokenName = useMemo(function () {\n    return earnToken.toUpperCase();\n  }, [earnToken]);\n  var chartTimeFrame = [\"Total\", \"Aujourd'hui\"];\n  var formattedEarnings = numbro(getBalanceNumber(earnings) || 0).format({\n    average: true,\n    spaceSeparated: true,\n    thousandSeparated: true,\n    mantissa: 2\n  });\n  var keyIndicatorsList = [{\n    title: \"Balance\",\n    value: \"\".concat(numbro(getBalanceNumber(tokenBalance) || 0).format({\n      average: true,\n      mantissa: 2,\n      spaceSeparated: true\n    }))\n  }, {\n    title: \"Staked\",\n    value: \"\".concat(numbro(getBalanceNumber(stakedBalance) || 0).format({\n      spaceSeparated: true,\n      thousandSeparated: true,\n      mantissa: 3\n    }))\n  }, {\n    title: \"Earnings \".concat(earnToken),\n    value: \"\".concat(formattedEarnings)\n  }];\n  var stakedPercentage = getBalanceNumber(stakedBalance) * 100 / (getBalanceNumber(stakedBalance) + getBalanceNumber(tokenBalance));\n  var uniswapURL = \"https://app.uniswap.org/#/add/\".concat(tokenAddress, \"/ETH\");\n  return __jsx(Layout, {\n    pageTitle: \"Stake \".concat(lpToken),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 5\n    }\n  }, __jsx(LayoutDashboard, {\n    currentTabIndex: 1,\n    sectionTitle: \"Stake \".concat(lpToken),\n    rightLink: {\n      title: \"Get LP token\",\n      link: uniswapURL\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"containerSpaceBetween notResponsive\",\n    style: {\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 9\n    }\n  }, keyIndicatorsList.map(function (_ref3, index) {\n    var title = _ref3.title,\n        value = _ref3.value;\n    return __jsx(\"div\", {\n      key: index,\n      className: \"containerItem containerSpaceBetween\",\n      style: {\n        padding: isMobileLayout ? 10 : responsiveWidth < 1250 ? 20 : 25,\n        width: \"25%\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, __jsx(\"p\", {\n      style: {\n        color: ColorGuide.mainGrey\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }\n    }, title), __jsx(\"h3\", {\n      style: {\n        marginBottom: 0\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 17\n      }\n    }, value)));\n  })), __jsx(\"div\", {\n    className: \"containerSpaceBetween\",\n    style: {\n      alignItems: \"flex-start\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    style: {\n      width: isMobileLayout ? \"100%\" : \"38%\",\n      minWidth: !isMobileLayout && 150,\n      maxWidth: !isMobileLayout && 350,\n      marginBottom: isMobileLayout && 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"containerItem\",\n    style: {\n      padding: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 13\n    }\n  }, !allowance.toNumber() ? __jsx(React.Fragment, null, __jsx(\"p\", {\n    style: {\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 19\n    }\n  }, \"You didn't approve the pair \", lpToken, \" yet.\"), __jsx(\"button\", {\n    onClick: handleApprove,\n    style: {\n      width: \"100%\",\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 19\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 21\n    }\n  }, \"Approve the pair\"))) : __jsx(React.Fragment, null, __jsx(\"div\", {\n    style: {\n      margin: \"auto\",\n      width: 100,\n      height: 100,\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 19\n    }\n  }, __jsx(CircularProgressbarWithChildren, {\n    value: !isNaN(stakedPercentage) ? stakedPercentage : 0,\n    strokeWidth: 15,\n    styles: buildStyles({\n      pathColor: ColorGuide.mainGreen,\n      textColor: \"#f88\",\n      trailColor: ColorGuide.lightGreen\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 21\n    }\n  }, __jsx(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 23\n    }\n  }, !isNaN(stakedPercentage) ? stakedPercentage : 0, \"%\"))), __jsx(\"div\", {\n    style: {\n      position: \"relative\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 19\n    }\n  }, __jsx(\"input\", {\n    type: \"text\",\n    onChange: function onChange(e) {\n      return setSelectedAmount(e.target.value.replace(\",\", \".\"));\n    },\n    value: selectedAmount,\n    placeholder: \"Amount to stake\",\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 21\n    }\n  }), __jsx(\"button\", {\n    className: \"secondaryButton\",\n    style: {\n      position: \"absolute\",\n      top: 2,\n      right: 2,\n      paddingTop: 0,\n      paddingBottom: 0\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 21\n    }\n  }, __jsx(\"p\", {\n    onClick: function onClick() {\n      return setNewAmount(currentTokenBalance);\n    },\n    style: {\n      color: ColorGuide.mainBlue\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 23\n    }\n  }, \"MAX\"))), __jsx(\"button\", {\n    onClick: function onClick() {\n      onStake(selectedAmount);\n      setSelectedAmount(null);\n    },\n    style: {\n      width: \"100%\",\n      marginBottom: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 298,\n      columnNumber: 19\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 21\n    }\n  }, \"Stake amount\")), __jsx(\"button\", {\n    onClick: function onClick() {\n      onUnstake(selectedAmount);\n      setSelectedAmount(null);\n    },\n    style: {\n      width: \"100%\",\n      backgroundColor: ColorGuide.lightBlue\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 19\n    }\n  }, __jsx(\"p\", {\n    style: {\n      color: ColorGuide.mainBlue\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318,\n      columnNumber: 21\n    }\n  }, \"Withdraw amount\"))))), __jsx(\"div\", {\n    style: {\n      width: isMobileLayout ? \"100%\" : \"60%\",\n      minWidth: 150,\n      maxWidth: 1500\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 11\n    }\n  }, earnings > 0 && __jsx(\"button\", {\n    onClick: function onClick() {\n      onReward();\n    },\n    style: {\n      width: \"100%\",\n      marginBottom: isMobileLayout ? 25 : 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335,\n      columnNumber: 15\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 17\n    }\n  }, \"Get my reward (\", \"\".concat(formattedEarnings), \") GT\")), !isLoadingQuery && __jsx(\"div\", {\n    className: \"containerItem\",\n    style: {\n      padding: 15\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 15\n    }\n  }, __jsx(CustomChart, {\n    aggregateData: aggregateData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 17\n    }\n  }))))));\n}\n\n_s(SavingsDetail, \"7lFuEU+pjlijH/fFVmTeg2D/cc8=\", false, function () {\n  return [useWindowSize, useWallet, useRouter, useFarm, useQuery, useSushi, useEarnings, useWallet, useStake, useUnstake, useReward, useApprove, useAllowance, useTokenBalance, useStakedBalance, useRedeem];\n});\n\n_c = SavingsDetail;\nexport default _c2 = withApollo(SavingsDetail);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"SavingsDetail\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/theo/frontend/pages/savingsDetail.js"],"names":["React","useState","useEffect","useCallback","useMemo","Link","useRouter","Web3","provider","CircularProgressbarWithChildren","buildStyles","numbro","gql","moment","useWallet","useQuery","useFarm","useRedeem","useSushi","useEarnings","useStake","useUnstake","useStakedBalance","useTokenBalance","useReward","useApprove","useAllowance","useWindowSize","withApollo","getMasterChefContract","getContract","getBalanceNumber","Layout","LayoutDashboard","CustomChart","StakingInput","ColorGuide","styles","SavingsDetail","responsiveWidth","responsiveHeight","account","currentTimeFrame","setCurrentTimeFrame","stakingBalance","setStakingBalance","selectedAmount","setSelectedAmount","requestedApproval","setRequestedApproval","loading","setLoading","isMobileLayout","farmId","query","pid","lpToken","lpTokenAddress","tokenAddress","earnToken","name","icon","QUERY","isLoadingQuery","aggregateData","data","window","scrollTo","sushi","earnings","ethereum","lpContract","onStake","onUnstake","onReward","onApprove","allowance","tokenBalance","options","address","stakedBalance","onRedeem","handleApprove","txHash","console","log","lpTokenName","earnTokenName","toUpperCase","chartTimeFrame","formattedEarnings","format","average","spaceSeparated","thousandSeparated","mantissa","keyIndicatorsList","title","value","stakedPercentage","uniswapURL","link","marginBottom","map","index","padding","width","color","mainGrey","alignItems","minWidth","maxWidth","toNumber","margin","height","isNaN","pathColor","mainGreen","textColor","trailColor","lightGreen","position","e","target","replace","top","right","paddingTop","paddingBottom","setNewAmount","currentTokenBalance","mainBlue","backgroundColor","lightBlue"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useMemo } from \"react\";\n\nimport Link from \"next/link\";\nimport { useRouter } from \"next/router\";\nimport Web3 from \"web3\";\nimport { provider } from \"web3-core\";\n\nimport {\n  CircularProgressbarWithChildren,\n  buildStyles,\n} from \"react-circular-progressbar\";\nimport numbro from \"numbro\";\nimport gql from \"graphql-tag\";\nimport moment from \"moment\";\n\nimport { useWallet } from \"use-wallet\";\nimport { useQuery } from \"@apollo/react-hooks\";\n\nimport useFarm from \"../hooks/useFarm\";\nimport useRedeem from \"../hooks/useRedeem\";\nimport useSushi from \"../hooks/useSushi\";\nimport useEarnings from \"../hooks/useEarnings\";\nimport useStake from \"../hooks/useStake\";\nimport useUnstake from \"../hooks/useUnstake\";\nimport useStakedBalance from \"../hooks/useStakedBalance\";\nimport useTokenBalance from \"../hooks/useTokenBalance\";\nimport useReward from \"../hooks/useReward\";\nimport useApprove from \"../hooks/useApprove\";\nimport useAllowance from \"../hooks/useAllowance\";\nimport useWindowSize from \"../hooks/useWindowSize\";\n\nimport withApollo from \"../utils/withApollo\";\n\nimport { getMasterChefContract } from \"../sushi/utils\";\nimport { getContract } from \"../utils/erc20\";\nimport { getBalanceNumber } from \"../utils/formatBalance\";\n\nimport Layout from \"../components/layout\";\nimport LayoutDashboard from \"../components/layoutDashboard\";\nimport CustomChart from \"../components/customChart\";\nimport StakingInput from \"../components/stakingInput\";\n\nimport ColorGuide from \"../styles/colorGuide\";\nimport styles from \"./index.module.css\";\n\nfunction SavingsDetail() {\n  const { responsiveWidth, responsiveHeight } = useWindowSize();\n  const { account } = useWallet();\n\n  const [currentTimeFrame, setCurrentTimeFrame] = useState(1);\n  const [stakingBalance, setStakingBalance] = useState(\"0\");\n  const [selectedAmount, setSelectedAmount] = useState(null);\n  const [requestedApproval, setRequestedApproval] = useState(false);\n\n  const [loading, setLoading] = useState(true);\n\n  const isMobileLayout = responsiveWidth < 650;\n\n  const {\n    query: { farmId },\n  } = useRouter();\n\n  const {\n    pid,\n    lpToken,\n    lpTokenAddress,\n    tokenAddress,\n    earnToken,\n    name,\n    icon,\n  } = useFarm(farmId) || {\n    pid: 0,\n    lpToken: \"\",\n    lpTokenAddress: \"\",\n    tokenAddress: \"\",\n    earnToken: \"\",\n    name: \"\",\n    icon: \"\",\n  };\n\n  const QUERY = gql`\n    {\n      pairDayDatas(\n        first: 100\n        orderBy: date\n        orderDirection: asc\n        where: {\n          pairAddress: \"${lpTokenAddress}\"\n          date_gt: 1592505859\n        }\n      ) {\n        date\n        reserveUSD\n      }\n    }\n  `;\n\n  const { loading: isLoadingQuery, data: aggregateData } = useQuery(QUERY);\n\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n\n  const sushi = useSushi();\n  const earnings = useEarnings(pid);\n\n  const { ethereum } = useWallet();\n\n  const lpContract = useMemo(() => {\n    return getContract(ethereum, lpTokenAddress);\n  }, [ethereum, lpTokenAddress]);\n\n  const { onStake } = useStake(pid);\n  const { onUnstake } = useUnstake(pid);\n  const { onReward } = useReward(pid);\n  const { onApprove } = useApprove(lpContract);\n  const allowance = useAllowance(lpContract);\n\n  const tokenBalance = useTokenBalance(lpContract.options.address);\n  const stakedBalance = useStakedBalance(pid);\n\n  const { onRedeem } = useRedeem(getMasterChefContract(sushi));\n\n  const handleApprove = useCallback(async () => {\n    try {\n      setRequestedApproval(true);\n      const txHash = await onApprove();\n      if (!txHash) {\n        setRequestedApproval(false);\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }, [onApprove, setRequestedApproval]);\n\n  const lpTokenName = useMemo(() => {\n    return lpToken;\n  }, [lpToken]);\n\n  const earnTokenName = useMemo(() => {\n    return earnToken.toUpperCase();\n  }, [earnToken]);\n\n  const chartTimeFrame = [\"Total\", \"Aujourd'hui\"];\n\n  const formattedEarnings = numbro(getBalanceNumber(earnings) || 0).format({\n    average: true,\n    spaceSeparated: true,\n    thousandSeparated: true,\n    mantissa: 2,\n  });\n\n  const keyIndicatorsList = [\n    {\n      title: `Balance`,\n      value: `${numbro(getBalanceNumber(tokenBalance) || 0).format({\n        average: true,\n        mantissa: 2,\n        spaceSeparated: true,\n      })}`,\n    },\n    {\n      title: `Staked`,\n      value: `${numbro(getBalanceNumber(stakedBalance) || 0).format({\n        spaceSeparated: true,\n        thousandSeparated: true,\n        mantissa: 3,\n      })}`,\n    },\n    {\n      title: `Earnings ${earnToken}`,\n      value: `${formattedEarnings}`,\n    },\n  ];\n\n  const stakedPercentage =\n    (getBalanceNumber(stakedBalance) * 100) /\n    (getBalanceNumber(stakedBalance) + getBalanceNumber(tokenBalance));\n\n  const uniswapURL = `https://app.uniswap.org/#/add/${tokenAddress}/ETH`;\n\n  return (\n    <Layout pageTitle={`Stake ${lpToken}`}>\n      <LayoutDashboard\n        currentTabIndex={1}\n        sectionTitle={`Stake ${lpToken}`}\n        rightLink={{\n          title: \"Get LP token\",\n          link: uniswapURL,\n        }}\n      >\n        <div\n          className=\"containerSpaceBetween notResponsive\"\n          style={{ marginBottom: 20 }}\n        >\n          {keyIndicatorsList.map(({ title, value }, index) => (\n            <div\n              key={index}\n              className=\"containerItem containerSpaceBetween\"\n              style={{\n                padding: isMobileLayout ? 10 : responsiveWidth < 1250 ? 20 : 25,\n                width: \"25%\",\n              }}\n            >\n              <div>\n                <p style={{ color: ColorGuide.mainGrey }}>{title}</p>\n                <h3 style={{ marginBottom: 0 }}>{value}</h3>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div\n          className=\"containerSpaceBetween\"\n          style={{ alignItems: \"flex-start\" }}\n        >\n          <div\n            style={{\n              width: isMobileLayout ? \"100%\" : \"38%\",\n              minWidth: !isMobileLayout && 150,\n              maxWidth: !isMobileLayout && 350,\n              marginBottom: isMobileLayout && 10,\n            }}\n          >\n            <div\n              className=\"containerItem\"\n              style={{\n                padding: 20,\n              }}\n            >\n              {!allowance.toNumber() ? (\n                <>\n                  <p style={{ marginBottom: 20 }}>\n                    You didn't approve the pair {lpToken} yet.\n                  </p>\n                  <button\n                    onClick={handleApprove}\n                    style={{ width: \"100%\", marginBottom: 10 }}\n                  >\n                    <p>Approve the pair</p>\n                  </button>\n                </>\n              ) : (\n                <>\n                  <div\n                    style={{\n                      margin: \"auto\",\n                      width: 100,\n                      height: 100,\n                      marginBottom: 20,\n                    }}\n                  >\n                    <CircularProgressbarWithChildren\n                      value={!isNaN(stakedPercentage) ? stakedPercentage : 0}\n                      strokeWidth={15}\n                      styles={buildStyles({\n                        pathColor: ColorGuide.mainGreen,\n                        textColor: \"#f88\",\n                        trailColor: ColorGuide.lightGreen,\n                      })}\n                    >\n                      <h4>\n                        {!isNaN(stakedPercentage) ? stakedPercentage : 0}%\n                      </h4>\n                    </CircularProgressbarWithChildren>\n                  </div>\n\n                  <div style={{ position: \"relative\" }}>\n                    <input\n                      type=\"text\"\n                      onChange={(e) =>\n                        setSelectedAmount(e.target.value.replace(\",\", \".\"))\n                      }\n                      value={selectedAmount}\n                      placeholder=\"Amount to stake\"\n                      required\n                    />\n\n                    <button\n                      className=\"secondaryButton\"\n                      style={{\n                        position: \"absolute\",\n                        top: 2,\n                        right: 2,\n                        paddingTop: 0,\n                        paddingBottom: 0,\n                      }}\n                    >\n                      <p\n                        onClick={() => setNewAmount(currentTokenBalance)}\n                        style={{ color: ColorGuide.mainBlue }}\n                      >\n                        MAX\n                      </p>\n                    </button>\n                  </div>\n\n                  <button\n                    onClick={() => {\n                      onStake(selectedAmount);\n                      setSelectedAmount(null);\n                    }}\n                    style={{ width: \"100%\", marginBottom: 10 }}\n                  >\n                    <p>Stake amount</p>\n                  </button>\n\n                  <button\n                    onClick={() => {\n                      onUnstake(selectedAmount);\n                      setSelectedAmount(null);\n                    }}\n                    style={{\n                      width: \"100%\",\n                      backgroundColor: ColorGuide.lightBlue,\n                    }}\n                  >\n                    <p style={{ color: ColorGuide.mainBlue }}>\n                      Withdraw amount\n                    </p>\n                  </button>\n                </>\n              )}\n            </div>\n          </div>\n\n          <div\n            style={{\n              width: isMobileLayout ? \"100%\" : \"60%\",\n              minWidth: 150,\n              maxWidth: 1500,\n            }}\n          >\n            {earnings > 0 && (\n              <button\n                onClick={() => {\n                  onReward();\n                }}\n                style={{\n                  width: \"100%\",\n                  marginBottom: isMobileLayout ? 25 : 10,\n                }}\n              >\n                <p>Get my reward ({`${formattedEarnings}`}) GT</p>\n              </button>\n            )}\n            {!isLoadingQuery && (\n              <div className=\"containerItem\" style={{ padding: 15 }}>\n                <CustomChart aggregateData={aggregateData} />\n              </div>\n            )}\n          </div>\n        </div>\n      </LayoutDashboard>\n    </Layout>\n  );\n}\n\nexport default withApollo(SavingsDetail);\n"]},"metadata":{},"sourceType":"module"}